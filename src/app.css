@import 'tailwindcss';
@import './lib/plone/navigation/nav-variables.css';
@import './lib/styles/layout-variables.css';
@plugin '@tailwindcss/forms';
@plugin '@tailwindcss/typography';

@layer base {
	h1 {
		font-size: var(--text-2xl);
	}
	h2 {
		font-size: var(--text-xl);
	}
	h3 {
		font-size: var(--text-lg);
	}
	h4 {
		font-size: var(--text-base);
		font-weight: var(--font-weight-semibold, 600);
	}
	h5 {
		font-size: var(--text-sm);
		font-weight: var(--font-weight-semibold, 600);
	}
	h6 {
		font-size: var(--text-xs);
		font-weight: var(--font-weight-semibold, 600);
	}
	a {
		color: var(--color-blue-600);
		text-decoration-line: underline;
	}
}

@layer components {
	.card {
		--rounded-lg: 1rem;
		--spacing-6: 1rem;
		background-color: var(--color-white);
		border-radius: var(--rounded-lg);
		padding: var(--spacing-6);
		box-shadow: var(--shadow-xl);
	}

	/* ==============================================
	   Container Utility Classes
	   Three-tier container width system for layouts
	   ============================================== */

	/* Layout container - full-width elements like header/footer (1440px) */
	.container-layout {
		max-width: var(--layout-container-width);
		width: 100%;
		margin-left: auto;
		margin-right: auto;
		padding-inline: var(--container-padding-mobile);
	}

	/* Default container - standard content sections (940px) */
	.container-default {
		max-width: var(--default-container-width);
		width: 100%;
		margin-left: auto;
		margin-right: auto;
		padding-inline: var(--container-padding-mobile);
	}

	/* Narrow container - text-focused content like articles (620px) */
	.container-narrow {
		max-width: var(--narrow-container-width);
		width: 100%;
		margin-left: auto;
		margin-right: auto;
		padding-inline: var(--container-padding-mobile);
	}

	/* Responsive padding for containers - tablet (768px+) */
	@media (min-width: 768px) {
		.container-layout,
		.container-default,
		.container-narrow {
			padding-inline: var(--container-padding-tablet);
		}
	}

	/* Responsive padding for containers - desktop (1024px+) */
	@media (min-width: 1024px) {
		.container-layout,
		.container-default,
		.container-narrow {
			padding-inline: var(--container-padding-desktop);
		}
	}

	/* ==============================================
	   Site Wrapper
	   Root layout container with flex column layout
	   ============================================== */

	.site-wrapper {
		display: flex;
		flex-direction: column;
		min-height: 100vh;
	}

	/* ==============================================
	   Site Header Component Styles
	   Modular header with gradient background
	   ============================================== */

	/* Site header - full viewport width with gradient */
	.site-header {
		width: 100%;
		background: linear-gradient(
			to right,
			var(--header-gradient-start),
			var(--header-gradient-end)
		);
		min-height: var(--header-height);
	}

	/* Header inner container - constrains content to layout width */
	.site-header .header-inner {
		display: flex;
		flex-direction: column;
		align-items: stretch;
		gap: 0.5rem;
		padding-block: 0.75rem;
	}

	/* Header logo region */
	.site-header .header-logo {
		display: flex;
		align-items: center;
		flex-shrink: 0;
	}

	.site-header .header-logo .logo-link {
		color: var(--header-text-color, #ffffff);
		text-decoration: none;
		font-weight: var(--font-weight-bold, 700);
		font-size: var(--text-xl, 1.25rem);
	}

	.site-header .header-logo .logo-link:hover {
		opacity: 0.9;
	}

	/* Header navigation region */
	.site-header .header-nav {
		display: flex;
		align-items: center;
		flex-grow: 1;
	}

	/* Override navigation text colors for header context (WCAG AA compliance)
	   Nav items default to teal text (--nav-panel-bg: #0097a7), which has poor contrast
	   on teal header background. Scoped Svelte styles require !important to override. */
	.site-header .nav-mega__item {
		color: var(--header-text-color, #ffffff) !important;
	}

	.site-header .nav-mega__item:hover,
	.site-header .nav-mega__item--active,
	.site-header .nav-mega__item--open {
		color: var(--header-text-color, #ffffff) !important;
		opacity: 0.9;
	}

	.site-header .nav-mega__item--active::after {
		background-color: var(--header-text-color, #ffffff) !important;
	}

	/* Focus ring needs white color on teal background for visibility */
	.site-header .nav-mega__item:focus-visible {
		outline-color: var(--header-text-color, #ffffff) !important;
	}

	/* Language switcher text colors for header context (WCAG AA compliance) */
	.site-header .lang-link {
		color: var(--header-text-color, #ffffff) !important;
	}

	.site-header .lang-link:hover {
		color: var(--header-text-color, #ffffff) !important;
		opacity: 0.9;
	}

	.site-header .lang-link--current {
		color: var(--header-text-color, #ffffff) !important;
	}

	.site-header .lang-link:focus-visible {
		outline-color: var(--header-text-color, #ffffff) !important;
	}

	.site-header .lang-link--separator::after {
		color: var(--header-text-color, #ffffff) !important;
		opacity: 0.7;
	}

	/* Header utility region */
	.site-header .header-utility {
		display: flex;
		align-items: center;
		flex-shrink: 0;
		gap: 0.5rem;
	}

	/* Desktop header layout (1024px+) */
	@media (min-width: 1024px) {
		.site-header .header-inner {
			flex-direction: row;
			align-items: center;
			justify-content: space-between;
			gap: 1.5rem;
		}

		.site-header .header-nav {
			justify-content: center;
		}
	}

	/* ==============================================
	   Breadcrumbs Wrapper
	   Container for breadcrumbs between header and main
	   ============================================== */

	.breadcrumbs-wrapper {
		padding-block: 0.75rem;
		background-color: var(--color-gray-50, #f9fafb);
		border-bottom: 1px solid var(--color-gray-200, #e5e7eb);
	}

	.breadcrumbs-wrapper .breadcrumbs {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		gap: 0.5rem;
		list-style: none;
		margin: 0;
		padding: 0;
		font-size: var(--text-sm, 0.875rem);
	}

	.breadcrumbs-wrapper .breadcrumbs li {
		display: flex;
		align-items: center;
	}

	.breadcrumbs-wrapper .breadcrumbs li:not(:last-child)::after {
		content: '/';
		margin-left: 0.5rem;
		color: var(--color-gray-400, #9ca3af);
	}

	.breadcrumbs-wrapper .breadcrumbs a {
		color: var(--color-gray-600, #4b5563);
		text-decoration: none;
	}

	.breadcrumbs-wrapper .breadcrumbs a:hover {
		text-decoration: underline;
	}

	.breadcrumbs-wrapper .breadcrumbs li:last-child a {
		color: var(--color-gray-900, #111827);
		font-weight: var(--font-weight-medium, 500);
	}

	/* ==============================================
	   Main Content Area
	   Primary content container with proper spacing
	   ============================================== */

	.main-content {
		flex: 1;
		padding-block: var(--section-spacing);
	}

	/* ==============================================
	   Site Footer Component
	   Full viewport width with gradient background
	   ============================================== */

	/* Base footer styling - spans full viewport width */
	.site-footer {
		width: 100%;
		background: linear-gradient(
			to right,
			var(--footer-gradient-start),
			var(--footer-gradient-end)
		);
		padding: var(--footer-padding);
		color: var(--footer-text-color, #ffffff);
		margin-top: auto;
	}

	/* Footer links styling - override default blue links */
	.site-footer a {
		color: var(--footer-text-color, #ffffff);
		text-decoration: underline;
	}

	.site-footer a:hover {
		opacity: 0.9;
	}

	/* Slate Block Custom Properties */
	:root {
		/* Headings */
		--slate-heading-color: inherit;
		--slate-heading-font-weight: var(--font-weight-bold, 700);

		/* Paragraph */
		--slate-paragraph-margin: 0 0 1rem 0;
		--slate-paragraph-line-height: 1.6;

		/* Inline Code */
		--slate-code-bg: var(--color-gray-100, #f3f4f6);
		--slate-code-font-family:
			ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;
		--slate-code-padding: 0.125rem 0.25rem;
		--slate-code-border-radius: 0.25rem;

		/* Blockquote */
		--slate-blockquote-border-color: var(--color-gray-300, #d1d5db);
		--slate-blockquote-border-width: 4px;
		--slate-blockquote-padding: 0 0 0 1rem;
		--slate-blockquote-margin: 1rem 0;

		/* Lists */
		--slate-list-margin: 0 0 1rem 0;
		--slate-list-padding: 0 0 0 1.5rem;
		--slate-list-item-margin: 0.25rem 0;

		/* Introduction Block */
		--introduction-font-size: var(--text-xl);
		--introduction-font-weight: inherit;
		--introduction-color: inherit;
		--introduction-max-width: 48rem;

		/* Slate Table Block Custom Properties */
		--table-cell-padding: 0.75rem 1rem;
		--table-border-color: var(--color-gray-200, #e5e7eb);
		--table-header-bg: var(--color-gray-50, #f9fafb);
		--table-striped-row-bg: var(--color-gray-50, #f9fafb);
		--table-inverted-bg: var(--color-gray-800, #1f2937);
		--table-inverted-color: var(--color-white, #ffffff);
		--table-compact-padding: 0.375rem 0.5rem;

		/* Teaser Block Custom Properties (Volto-compatible) */
		--teaser-images-aspect-ratio: 16/9;
		--teaser-images-object-position: top left;
		--teaser-content-padding: 0.5rem 0;
		--teaser-gap: 1rem;
		--teaser-headline-color: var(--color-gray-600, #4b5563);
		--teaser-headline-font-size: var(--text-sm, 0.875rem);
		--teaser-title-color: inherit;
		--teaser-description-color: var(--color-gray-700, #374151);

		/* Video Block Custom Properties */
		--video-aspect-ratio: 16/9;
		--video-border-radius: 0;

		/* Maps Block Custom Properties */
		--maps-aspect-ratio: 16/9;
		--maps-border-radius: 0;
	}

	/* Slate Paragraph */
	.slate-paragraph {
		margin: var(--slate-paragraph-margin);
		line-height: var(--slate-paragraph-line-height);
	}

	/* Slate Headings */
	.slate-h2,
	.slate-h3,
	.slate-h4,
	.slate-h5,
	.slate-h6 {
		color: var(--slate-heading-color);
		font-weight: var(--slate-heading-font-weight);
		margin-bottom: 0.5rem;
	}

	/* Slate Inline Code */
	.slate-code {
		font-family: var(--slate-code-font-family);
		background-color: var(--slate-code-bg);
		padding: var(--slate-code-padding);
		border-radius: var(--slate-code-border-radius);
	}

	/* Slate Blockquote */
	.slate-blockquote {
		border-left: var(--slate-blockquote-border-width) solid var(--slate-blockquote-border-color);
		padding: var(--slate-blockquote-padding);
		margin: var(--slate-blockquote-margin);
	}

	/* Slate Lists */
	.slate-ol {
		list-style-type: decimal;
		list-style-position: inside;
		margin: var(--slate-list-margin);
		padding: var(--slate-list-padding);
	}

	.slate-ul {
		list-style-type: disc;
		list-style-position: inside;
		margin: var(--slate-list-margin);
		padding: var(--slate-list-padding);
	}

	.slate-li {
		margin: var(--slate-list-item-margin);
	}

	/* Nested lists reset margin */
	.slate-ol .slate-ol,
	.slate-ol .slate-ul,
	.slate-ul .slate-ol,
	.slate-ul .slate-ul {
		margin-top: 0.25rem;
		margin-bottom: 0;
	}

	/* Introduction Block */
	.introduction-block {
		font-size: var(--introduction-font-size);
		font-weight: var(--introduction-font-weight);
		color: var(--introduction-color);
		max-width: var(--introduction-max-width);
		margin-bottom: 1.5rem;
	}

	/* Slate Table Block Styles */

	/* Table Scroll Container - Responsive horizontal scroll */
	.table-scroll-container {
		overflow-x: auto;
		position: relative;
		/* Visual scroll indicator shadows on edges when scrollable */
		background:
			/* Left shadow */
			linear-gradient(to right, var(--color-white, #ffffff) 30%, transparent),
			/* Right shadow */ linear-gradient(to left, var(--color-white, #ffffff) 30%, transparent),
			/* Left shadow indicator */ linear-gradient(to right, rgba(0, 0, 0, 0.1), transparent 20px),
			/* Right shadow indicator */ linear-gradient(to left, rgba(0, 0, 0, 0.1), transparent 20px);
		background-position:
			left center,
			right center,
			left center,
			right center;
		background-repeat: no-repeat;
		background-size:
			40px 100%,
			40px 100%,
			20px 100%,
			20px 100%;
		background-attachment: local, local, scroll, scroll;
	}

	/* Base table styles */
	.block.slateTable table {
		width: 100%;
		border-collapse: collapse;
		border-spacing: 0;
		font-size: var(--text-sm, 0.875rem);
		line-height: 1.5;
	}

	.block.slateTable th,
	.block.slateTable td {
		padding: var(--table-cell-padding);
		text-align: left;
		vertical-align: top;
		border-bottom: 1px solid var(--table-border-color);
	}

	.block.slateTable th {
		font-weight: var(--font-weight-semibold, 600);
		background-color: var(--table-header-bg);
	}

	.block.slateTable thead th {
		border-bottom: 2px solid var(--table-border-color);
	}

	/* Display option modifiers */

	/* Fixed table layout */
	.block.slateTable table.slateTable--fixed {
		table-layout: fixed;
	}

	/* Compact - reduced padding */
	.block.slateTable table.slateTable--compact th,
	.block.slateTable table.slateTable--compact td {
		padding: var(--table-compact-padding);
	}

	/* Basic - minimal borders and backgrounds */
	.block.slateTable table.slateTable--basic {
		border: none;
	}

	.block.slateTable table.slateTable--basic th {
		background-color: transparent;
		border-bottom: 1px solid var(--table-border-color);
	}

	.block.slateTable table.slateTable--basic td {
		border-bottom: none;
	}

	.block.slateTable table.slateTable--basic thead th {
		border-bottom: 1px solid var(--table-border-color);
	}

	/* Celled - visible cell borders */
	.block.slateTable table.slateTable--celled th,
	.block.slateTable table.slateTable--celled td {
		border: 1px solid var(--table-border-color);
	}

	/* Inverted - inverted color scheme */
	.block.slateTable table.slateTable--inverted {
		background-color: var(--table-inverted-bg);
		color: var(--table-inverted-color);
	}

	.block.slateTable table.slateTable--inverted th {
		background-color: rgba(255, 255, 255, 0.1);
		border-color: rgba(255, 255, 255, 0.2);
	}

	.block.slateTable table.slateTable--inverted td {
		border-color: rgba(255, 255, 255, 0.1);
	}

	.block.slateTable table.slateTable--inverted a {
		color: var(--color-blue-300, #93c5fd);
	}

	/* Striped - alternating row colors */
	.block.slateTable table.slateTable--striped tbody tr:nth-child(odd) {
		background-color: var(--table-striped-row-bg);
	}

	/* Inverted striped rows need different treatment */
	.block.slateTable table.slateTable--inverted.slateTable--striped tbody tr:nth-child(odd) {
		background-color: rgba(255, 255, 255, 0.05);
	}

	/* Sortable table headers */
	.block.slateTable table.slateTable--sortable th {
		cursor: pointer;
		user-select: none;
		position: relative;
	}

	.block.slateTable table.slateTable--sortable th:hover {
		background-color: var(--color-gray-100, #f3f4f6);
	}

	.block.slateTable table.slateTable--inverted.slateTable--sortable th:hover {
		background-color: rgba(255, 255, 255, 0.15);
	}

	/* Focus ring styling for sortable headers - keyboard navigation */
	.block.slateTable table.slateTable--sortable th:focus-visible {
		outline: 2px solid var(--color-blue-500, #3b82f6);
		outline-offset: -2px;
		z-index: 1;
	}

	.block.slateTable table.slateTable--inverted.slateTable--sortable th:focus-visible {
		outline-color: var(--color-blue-300, #93c5fd);
	}

	/* Sort indicator arrows (using CSS) */
	.block.slateTable table.slateTable--sortable th[aria-sort='ascending']::after {
		content: ' \2191'; /* Up arrow */
		margin-left: 0.25rem;
	}

	.block.slateTable table.slateTable--sortable th[aria-sort='descending']::after {
		content: ' \2193'; /* Down arrow */
		margin-left: 0.25rem;
	}

	/* Teaser Block Styles */

	/* Base teaser block styling */
	.block.teaser {
		margin-bottom: 1.5rem;
	}

	/* Teaser item link reset */
	.block.teaser .teaser-item {
		text-decoration: none;
		color: inherit;
	}

	.block.teaser .teaser-item:hover h2 {
		text-decoration: underline;
	}

	/* Teaser headline (kicker) styling */
	.block.teaser .headline {
		display: block;
		color: var(--teaser-headline-color);
		font-size: var(--teaser-headline-font-size);
		margin-bottom: 0.25rem;
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}

	/* Teaser title styling */
	.block.teaser h2 {
		color: var(--teaser-title-color);
		margin-bottom: 0.5rem;
	}

	/* Teaser description styling */
	.block.teaser .description {
		color: var(--teaser-description-color);
		line-height: 1.5;
	}

	/* Video Block Styles */

	/* Base video block styling */
	.block.video {
		margin-bottom: 1.5rem;
		border-radius: var(--video-border-radius);
		overflow: hidden;
	}

	/* Video aspect ratio container */
	.block.video .video-wrapper {
		position: relative;
		aspect-ratio: var(--video-aspect-ratio, 16/9);
		width: 100%;
	}

	.block.video .video-wrapper iframe,
	.block.video .video-wrapper video {
		width: 100%;
		height: 100%;
	}

	.block.video .video-wrapper iframe {
		border: 0;
	}

	.block.video .video-wrapper video {
		object-fit: contain;
	}

	/* Full-width alignment (default) - spans full container width */
	.block.video.has--align--full {
		width: 100%;
		float: none;
	}

	.block.video.has--align--full .video-wrapper {
		width: 100%;
	}

	/* Left alignment - float left, width ~50%, content wraps on right */
	.block.video.has--align--left {
		float: left;
		width: 50%;
		margin-right: 1.5rem;
		margin-bottom: 1rem;
	}

	/* Center alignment - centered, no float, reasonable max-width */
	.block.video.has--align--center {
		float: none;
		width: 100%;
		max-width: 640px;
		margin-left: auto;
		margin-right: auto;
	}

	/* Right alignment - float right, width ~50%, content wraps on left */
	.block.video.has--align--right {
		float: right;
		width: 50%;
		margin-left: 1.5rem;
		margin-bottom: 1rem;
	}

	/* Video Block Mobile responsive behavior */
	@media (max-width: 768px) {
		/* Remove floats and stack full-width on mobile */
		.block.video.has--align--left,
		.block.video.has--align--right {
			float: none;
			width: 100%;
			margin-left: 0;
			margin-right: 0;
		}

		/* Center alignment stays full-width on mobile */
		.block.video.has--align--center {
			max-width: 100%;
		}
	}

	/* Maps Block Styles */

	/* Base maps block styling */
	.block.maps {
		margin-bottom: 1.5rem;
		border-radius: var(--maps-border-radius);
		overflow: hidden;
	}

	/* Maps aspect ratio container */
	.block.maps .maps-wrapper {
		position: relative;
		aspect-ratio: var(--maps-aspect-ratio, 16/9);
		width: 100%;
	}

	.block.maps .maps-wrapper iframe {
		width: 100%;
		height: 100%;
		border: 0;
	}

	/* Full-width alignment (default) - spans full container width */
	.block.maps.has--align--full {
		width: 100%;
		float: none;
	}

	.block.maps.has--align--full .maps-wrapper {
		width: 100%;
	}

	/* Left alignment - float left, width ~50%, content wraps on right */
	.block.maps.has--align--left {
		float: left;
		width: 50%;
		margin-right: 1.5rem;
		margin-bottom: 1rem;
	}

	/* Center alignment - centered, no float, reasonable max-width */
	.block.maps.has--align--center {
		float: none;
		width: 100%;
		max-width: 640px;
		margin-left: auto;
		margin-right: auto;
	}

	/* Right alignment - float right, width ~50%, content wraps on left */
	.block.maps.has--align--right {
		float: right;
		width: 50%;
		margin-left: 1.5rem;
		margin-bottom: 1rem;
	}

	/* Maps Block Mobile responsive behavior */
	@media (max-width: 768px) {
		/* Remove floats and stack full-width on mobile */
		.block.maps.has--align--left,
		.block.maps.has--align--right {
			float: none;
			width: 100%;
			margin-left: 0;
			margin-right: 0;
		}

		/* Center alignment stays full-width on mobile */
		.block.maps.has--align--center {
			max-width: 100%;
		}
	}

	/* Skip map link - accessibility */
	.skip-map-link {
		position: absolute;
		left: -10000px;
		top: auto;
		width: 1px;
		height: 1px;
		overflow: hidden;
	}

	.skip-map-link:focus {
		position: static;
		width: auto;
		height: auto;
		overflow: visible;
		display: inline-block;
		padding: 0.5rem 1rem;
		background-color: var(--color-blue-600, #2563eb);
		color: var(--color-white, #ffffff);
		text-decoration: none;
		border-radius: 0.25rem;
		margin-bottom: 0.5rem;
	}

	/* Noscript fallback styling */
	.block.maps noscript p {
		padding: 1rem;
		background-color: var(--color-gray-100, #f3f4f6);
		border-radius: 0.25rem;
	}
}
